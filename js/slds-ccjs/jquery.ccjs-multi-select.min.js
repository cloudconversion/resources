if("undefined"==typeof jQuery.ccjs)throw new Error("Please include the ccjs initializer file");!function(a){var b='<li draggable="true" id="{{optionId}}" class="slds-picklist__item slds-has-icon slds-has-icon--left" aria-selected="false" tabindex="0" role="option"><span class="slds-truncate"><span>{{optionLabel}}</span></span></li>',c=function(b,c){this.$el=a(b),this.$selectedContainer=this.$el.find('[data-ccjs-multi-select="selected"]').find("ul"),this.$unselectedContainer=this.$el.find('[data-ccjs-multi-select="unselected"]').find("ul"),this.selectedItems=c.selectedItems,this.unselectedItems=c.unselectedItems,this.settings=c,this.init()};c.prototype={constructor:c,init:function(){this.renderPicklists(),this.$el.find('[data-ccjs-multi-select="unselect"]').on("click",this,this.unselectOption),this.$el.find('[data-ccjs-multi-select="select"]').on("click",this,this.selectOption),this.$el.find('[data-ccjs-multi-select="move-up"]').on("click",this,this.moveOptionUp),this.$el.find('[data-ccjs-multi-select="move-down"]').on("click",this,this.moveOptionDown)},renderPicklists:function(){var b=this;this.unselectedItems.forEach(function(a){b.$unselectedContainer.append(b.createPicklistDomItem(a))}),this.$unselectedContainer.on("click","li",function(c){a(this).addClass("slds-is-selected").attr("aria-selected","true").siblings().removeClass("slds-is-selected").attr("aria-selected","false"),b.itemToSelect=a(this).data("ccjs-picklist-obj")}).on("dragstart","li",function(c){b.itemToSelect=a(this).data("ccjs-picklist-obj")}).on("dragover",function(a){a.preventDefault(),a.stopPropagation()}).on("dragenter",function(a){a.preventDefault(),a.stopPropagation()}).on("drop",function(a){a.preventDefault(),a.stopPropagation(),b.$el.find('[data-ccjs-multi-select="unselect"]').click()}),this.selectedItems.forEach(function(a){b.$selectedContainer.append(b.createPicklistDomItem(a))}),this.$selectedContainer.on("click","li",function(c){a(this).addClass("slds-is-selected").attr("aria-selected","true").siblings().removeClass("slds-is-selected").attr("aria-selected","false"),b.itemToUnselect=a(this).data("ccjs-picklist-obj")}).on("dragstart","li",function(c){b.itemToUnselect=a(this).data("ccjs-picklist-obj")}).on("dragover",function(a){a.preventDefault(),a.stopPropagation()}).on("dragenter",function(a){a.preventDefault(),a.stopPropagation()}).on("drop",function(a){a.preventDefault(),a.stopPropagation(),b.$el.find('[data-ccjs-multi-select="select"]').click()})},selectOption:function(a){var b=a.data;b.itemToSelect&&(b.$unselectedContainer.find("#"+b.itemToSelect.id).removeClass("slds-is-selected").attr("aria-selected","false").appendTo(b.$selectedContainer),b.unselectedItems.splice(b.unselectedItems.indexOf(b.itemToSelect),1),b.selectedItems.push(b.itemToSelect),b.itemToSelect=null)},unselectOption:function(a){var b=a.data;b.itemToUnselect&&(b.$selectedContainer.find("#"+b.itemToUnselect.id).removeClass("slds-is-selected").attr("aria-selected","false").appendTo(b.$unselectedContainer),b.selectedItems.splice(b.selectedItems.indexOf(b.itemToUnselect),1),b.unselectedItems.push(b.itemToUnselect),b.itemToUnselect=null)},moveOptionUp:function(a){var b=a.data;if(b.itemToUnselect){var c=b.selectedItems.indexOf(b.itemToUnselect);if(c>0){b.selectedItems.splice(c,1),b.selectedItems.splice(c-1,0,b.itemToUnselect);var d=b.$selectedContainer.find("#"+b.itemToUnselect.id);d.removeClass("slds-is-selected").attr("aria-selected","false").insertBefore(d.prev("li")),b.itemToUnselect=null}}},moveOptionDown:function(a){var b=a.data;if(b.itemToUnselect){var c=b.selectedItems.indexOf(b.itemToUnselect);if(c<b.selectedItems.length-1){b.selectedItems.splice(c,1),b.selectedItems.splice(c+1,0,b.itemToUnselect);var d=b.$selectedContainer.find("#"+b.itemToUnselect.id);d.removeClass("slds-is-selected").attr("aria-selected","false").insertAfter(d.next("li")),b.itemToUnselect=null}}},createPicklistDomItem:function(c){return a(b.replace("{{optionId}}",c.id).replace("{{optionLabel}}",c.label)).data("ccjs-picklist-obj",c)},setSelectedItems:function(a){var b=this;if(a&&a.length>0){var c=this.unselectedItems.filter(function(b){return-1!==a.indexOf(b.id)});c.forEach(function(a){b.itemToSelect=a,b.$el.find('[data-ccjs-multi-select="select"]').click()})}},setUnselectedItems:function(a){var b=this;if(a&&a.length>0){var c=this.selectedItems.filter(function(b){return-1!==a.indexOf(b.id)});c.forEach(function(a){b.itemToUnselect=a,b.$el.find('[data-ccjs-multi-select="unselect"]').click()})}},getSelectedItems:function(){return this.selectedItems},getUnselectedItems:function(){return this.unselectedItems}},a.fn.multiSelect=function(b){var d,e=arguments,f=a.extend({selectedItems:[],unselectedItems:[],assetsLocation:a.ccjs.assetsLocation},"object"==typeof b?b:{});if(this.each(function(){var g=a(this),h=g.data("ccjs-multi-select");if(!h){var i=new c(this,f);g.data("ccjs-multi-select",h=i)}"string"==typeof b&&(d=h[b](e[1],e[2]))}),void 0===d||d instanceof c)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return d}}(jQuery);