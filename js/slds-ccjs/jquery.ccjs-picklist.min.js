if("undefined"==typeof jQuery.ccjs)throw new Error("Please include the ccjs initializer file");!function(a){var b=function(b,c){this.$el=a(b),this.settings=c,this.obj={},this.bindTrigger(),this.bindChoices()};b.prototype={constructor:b,bindTrigger:function(){var b=this,c=this.$el;this.obj.$trigger=a(".slds-button",c),this.obj.$dropdown=a(".slds-dropdown",c),this.obj.$choices=a(".slds-dropdown__item a",c),this.obj.$trigger.unbind().click(function(c){return c.stopPropagation(),b.obj.id=a(this).attr("id"),b.obj.$dropdown.hasClass("slds-hide")?(a('[data-ccjs="picklist"]').not(b.$el).picklist("close"),b.obj.$dropdown.removeClass("slds-hide").addClass("slds-show"),null===b.obj.valueId||"undefined"==typeof b.obj.valueId?b.focusedIndex=null:b.focusedIndex=b.obj.$dropdown.find("li").index(b.obj.$dropdown.find("#"+b.obj.valueId)),b.focusOnElement(),b.obj.$dropdown.on("keyup",b,b.processKeypress)):(b.obj.$dropdown.removeClass("slds-show").addClass("slds-hide"),b.obj.$dropdown.unbind("keyup",b.processKeypress)),!1}),a("body").click(function(){b.obj.$dropdown.removeClass("slds-show").addClass("slds-hide"),b.obj.$dropdown.unbind("keyup",b.processKeypress)}).keyup(function(b){27===b.keyCode&&a('[data-ccjs="picklist"]').picklist("close")})},processKeypress:function(a){var b=a.data,c=b.obj.$choices.length;switch(a.keyCode){case 40:b.focusedIndex=b.focusedIndex===c-1?0:b.focusedIndex+1,b.focusOnElement();break;case 38:b.focusedIndex=0===b.focusedIndex?c-1:b.focusedIndex-1,b.focusOnElement();break;case 27:b.$el.picklist("close")}return!1},focusOnElement:function(){null!==this.focusedIndex&&this.obj.$choices.eq(this.focusedIndex).focus()},bindChoices:function(){var b=this;this.obj.$valueContainer=a("> span",this.obj.$trigger),this.obj.$choices.unbind().click(function(c){c.stopPropagation();var d=a(this).closest("li").attr("id");b.setValueAndUpdateDom(d),b.settings.onChange(b.obj)})},setValueAndUpdateDom:function(a){var b=this.$el.find("#"+a);this.obj.value=b.find("a").text(),this.obj.valueId=a,this.obj.$dropdown.removeClass("slds-show").addClass("slds-hide"),this.obj.$dropdown.unbind("keyup",this.processKeypress),this.obj.$trigger.trigger("change.ccjs.picklist").focus(),this.obj.$valueContainer.text(this.obj.value),this.obj.$choices.parent().removeClass("slds-is-selected"),b.addClass("slds-is-selected")},setValue:function(a,b){this.setValueAndUpdateDom(a),b&&this.settings.onChange(this.obj)},getValueId:function(){return this.obj.valueId},getValue:function(){return this.obj},close:function(){this.obj.$dropdown.removeClass("slds-show").addClass("slds-hide"),this.obj.$dropdown.unbind("keyup",this.processKeypress)}},a.fn.picklist=function(c){var d,e=arguments,f=a.extend({assetsLocation:a.ccjs.assetsLocation,onChange:function(a){}},"object"==typeof c?c:{});if(this.each(function(){var g=a(this),h=g.data("ccjs-picklist");if(g.find(".slds-dropdown").addClass("slds-hide"),!h){var i=new b(this,f);g.data("ccjs-picklist",h=i)}"string"==typeof c&&(d=h[c](e[1],e[2]))}),void 0===d||d instanceof b)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return d}}(jQuery);