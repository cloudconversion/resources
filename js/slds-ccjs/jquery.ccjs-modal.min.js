if("undefined"==typeof jQuery.ccjs)throw new Error("Please include the ccjs initializer file");!function(a){function b(){e=a.ccjs.scoped?".slds":f,a(".slds-backdrop").remove(),a(e).append('<div class="ccjs-modal-container"></div>');var b=a(".ccjs-modal-container");g.appendTo(b).append('<div class="slds-backdrop"></div>').attr("aria-hidden","true").addClass("slds-hide")}function c(b,c){var d=b.data("ccjs-show"),e=a("#"+d);void 0===d?console.error('No "data-ccjs-show" attribute has been set'):(e.modal("show",c),b.blur(),h=b)}var d,e,f="body",g=a(".slds-modal"),h=null;a.fn.modal=function(i,j){function k(a){27==a.keyCode&&g.is(":visible")&&l()}function l(){n.self.modal("dismiss",o).unbind("click"),a(f).unbind("keyup",k),g.unbind("click"),p.unbind("click")}function m(b){c(a(this),i)}var n={};if(n.self=this,n.tabTarget=a('[href], [contenteditable="true"], button, a, input, textarea, select',e),n.modalTabTarget=a('[href], [contenteditable="true"], button, a, input, textarea, select',n.self),n.hasSelector=i&&i.hasOwnProperty("selector")?!0:!1,null!==i&&"string"==typeof i){var o=a.extend({selector:null,dismissSelector:'[data-ccjs-dismiss="modal"]',backdropDismiss:!1,onShow:function(a){},onShown:function(a){},onDismiss:function(a){},onDismissed:function(a){}},j),p=a(o.dismissSelector),q=a(".slds-modal__header, .slds-modal__content, .slds-modal__footer");switch(i){case"show":d=!0,n.id=this.attr("id"),a(".slds-modal").removeClass("slds-fade-in-open").attr("aria-hidden","false"),a(".slds-backdrop").remove(),a(".ccjs-modal-container").append('<div class="slds-backdrop"></div>'),a(f).keyup(k),n.self.addClass("slds-show"),p.click(function(a){a.preventDefault(),l()}),o.backdropDismiss&&(g.click(l),q.click(function(a){a.stopPropagation()})),n.tabTarget.attr("tabindex","-1"),n.modalTabTarget.attr("tabindex","1"),setTimeout(function(){a(".slds-backdrop").addClass("slds-backdrop--open"),n.self.addClass("slds-fade-in-open").trigger("show.ccjs.modal"),o.onShow(n),setTimeout(function(){n.self.trigger("shown.ccjs.modal"),o.onShown(n),d=!1},400)},25);break;case"dismiss":d||a(".slds-backdrop").removeClass("slds-backdrop--open"),o.onDismiss(n),n.tabTarget.removeAttr("tabindex"),n.self.removeClass("slds-fade-in-open").attr("aria-hidden","true"),null!==h&&h.focus(),n.self.trigger("dismiss.ccjs.modal"),setTimeout(function(){d||a(".slds-backdrop").remove(),h=null,n.self.addClass("slds-hide").trigger("dismissed.ccjs.modal"),o.onDismissed(n)},200);break;case"trigger":var r=n.self.data("ccjs-show"),s=a("#"+r);s.modal("show",o);break;default:console.error("The method you entered does not exist")}}else n.hasSelector&&1===this.length?(b(),this.on("click",i.selector,m)):(b(),n.self.click(function(){c(a(this),i)}));return this}}(jQuery);